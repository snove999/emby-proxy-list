      - name: Install Playwright
        run: |
          npm install playwright
          npx playwright install chromium
      
      - name: Fetch with Playwright
        run: |
          cat << 'SCRIPT' > fetch.js
          const { chromium } = require('playwright');
          const fs = require('fs');

          (async () => {
            const browser = await chromium.launch({ headless: true });
            const context = await browser.newContext({
              userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
            });
            
            const page = await context.newPage();
            
            console.log('访问页面...');
            await page.goto('https://ipdb.api.030101.xyz/?type=bestproxy&country=true');
            
            // Playwright 的智能等待
            console.log('等待页面稳定...');
            await page.waitForLoadState('networkidle', { timeout: 60000 });
            
            // 额外等待确保内容加载
            await page.waitForTimeout(5000);
            
            const content = await page.textContent('body');
            console.log('内容长度:', content.length);
            
            const lines = content.trim().split('\n').filter(line => 
              /^\d+\.\d+\.\d+\.\d+#\w+$/.test(line.trim())
            );
            
            if (lines.length > 0) {
              fs.writeFileSync('proxies.txt', lines.join('\n'));
              console.log('✅ 成功获取', lines.length, '个代理');
            } else {
              console.log('❌ 未获取到代理');
              console.log('页面内容:', content.substring(0, 500));
            }
            
            await browser.close();
          })();
          SCRIPT
          
          node fetch.js
